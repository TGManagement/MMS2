@model MMSystem.Models.Customer
@{
    Layout = "_LayoutShop";
    ViewData["Title"] = "Payment";
}
<script src="https://js.stripe.com/v2/"></script>
<script src="https://js.stripe.com/v3/"></script>

<h1>TEST</h1>
<div style="width:100%;height:100%;background-color:#f2f2f2;">
    <div>

        <form action="/charge" method="post" id="payment-form">
            2. Payment


            <div class="form-row">
                <label for="card-element">
                    Credit or debit card
                </label>
                <div id="card-element" style="width:30%">
                    <!-- A Stripe Element will be inserted here. -->
                </div>

                <!-- Used to display Element errors. -->
                <div id="card-errors" role="alert"></div>
            </div>
            <button  id="SubmitPayment" asp-controller="CheckOut" asp-action="RedirectStripe" asp-route-Id="@Model.CustomerId" >Submit Payment</button>



        </form>







        <!--below might be for charging a card

        <form action="/Payment/Processing" method="POST">
            <script src="https://Checkout.stripe.com/Checkout.js" class="stripe-button"
                    data-key="pk_test_BjTmcRGv7N5C4w6p1Wpr4t5x0082lcBMjL"
                    data-amount="@ViewBag.PaymentAmount"
                    data-name="[@ViewBag.CompanyName]"
                    data-description="@ViewBag.Description"
                    data-image=""
                    data-locale="en"
                    data-zip-code="true"
                    data-label="">
            </script>s
        </form>-->
        <!-- description https://stripe.com/img/documentation/Checkout/marketplace.png
        label Pay 10$-->
    </div>
</div>
@section Scripts
    {
    @{
        <script type="text/javascript">
            // Custom styling can be passed to options when creating an Element.


            var stripe = Stripe('pk_test_TYooMQauvdEDq54NiTphI7jx');
            var elements = stripe.elements();
            //var card = elements.create('card');
            // Create an instance of the card Element.
            var card = elements.create('card');

            // Add an instance of the card Element into the `card-element` <div>.
            card.mount('#card-element');

            var stripe = Stripe('pk_test_BjTmcRGv7N5C4w6p1Wpr4t5x0082lcBMjL');

        </script>

        <script type="text/javascript">

            var stripe = Stripe('pk_test_TYooMQauvdEDq54NiTphI7jx');
            $('#SubmitPayment').click(function () {
                stripe.redirectToCheckout(
                    {
                        // Make the id field from the Checkout Session creation API response
                        // available to this file, so you can provide it as parameter here
                        // instead of the {{CHECKOUT_SESSION_ID}} placeholder.
                        sessionId: '{{@(ViewBag.SessionId)}}'
                    }).then(function (result) {
                        // If `redirectToCheckout` fails due to a browser or network
                        // error, display the localized error message to your customer
                        // using `result.error.message`.
                    });
            });
        </script>
    }
}